<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Go Link with Header</title>
</head>
<body>
  <button id="goButton">Go</button>

  <script>
    const API_KEY = 'YOUR_API_KEY_HERE'; // Replace with your actual API key

    document.getElementById('goButton').addEventListener('click', async () => {
      try {
        const response = await fetch('https://tba.testingillusions.com/api/create-launch-token', {
          method: 'GET', // or 'POST' if required
          headers: {
            'Authorization': 'Bearer ${apiKey}'
          }
        });
 	    if (!response.ok) {
          throw new Error('Server responded with ' + response.statusText);
        }
        const data = await response.json();
        console.log(data.launch_url);
        
        console.log('Response received:', response.body);
        
        if (data.launch_url) {
          if (window.top !== window.self) {
             window.top.location = data.launch_url;
          }
        }
          else {
          alert('launch_url not found in response');
        }
     }
     catch (error) {
        console.error('Error:', error);
        alert('An error occurred. See console for details.');
      }
    });

  </script>
</body>
</html>